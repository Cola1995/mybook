<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>添加时书籍</title>
    <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
</head>
<body>
{#<form action="/add_book/" method="post">#}
{#    书名:<input type="text" name="book_name">#}
{#    出版社: <select name="plisherq">#}
{#    {% for plisher in plisher_list %}#}
{#        <option value="{{ plisher.id }}">{{ plisher.name }}</option>#}
{#    {% endfor %}#}
{##}
{#</select>#}
{#    <input type="submit" value="提交">#}
{#</form>#}

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="page-header">
                <h1>添加用户

                </h1>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">

            <div class="progress">
                <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="60"
                     aria-valuemin="0" aria-valuemax="100"
                     style="width: 30%; height: 90%">
                    1/3
                </div>
            </div>
        </div>
    </div>

    <!--表单面板-->
    <div class="row">
        <div class="col-md-12">
            <div class="panel panel-primary">
                <div class="panel-heading">用户信息
                    <span class="glyphicon glyphicon-pushpin pull-right" aria-hidden="true"></span>
                </div>
                <div class="panel-body">
                    <form class="form-horizontal" action="/add_user/" method="post" novalidate>
                        <div class="form-group {% if form_obj.name.errors.0 %}has-error{% endif %}">
                            <label for="inputEmail3" class="col-sm-2 control-label">用户名</label>
                            <div class="col-sm-4">
{#                                <input class="form-control" id="inputEmail3" placeholder="user_name" name="user_name">#}
                                {{ form_obj.name }}
                                <span class="help-block">{{ form_obj.name.errors.0 }}</span>
                            </div>
                        </div>

                        <div class="form-group {% if form_obj.pwd.errors.0 %}has-error{% endif %}">
                            <label for="inputEmail3" class="col-sm-2 control-label">密码</label>
                            <div class="col-sm-4">
{#                                <input  class="form-control" id="inputEmail4" placeholder="Password" name="password">#}
                                {{ form_obj.pwd }}
                                <span class="help-block">{{ form_obj.pwd.errors.0 }}</span>
                            </div>
                        </div>


                        <div class="form-group {% if form_obj.re_pwd.errors.0 %}has-error{% endif %}">
                            <label for="inputEmail3" class="col-sm-2 control-label">确认密码</label>
                            <div class="col-sm-4">
{#                                <input  class="form-control" id="inputEmail4" placeholder="Password" name="password">#}
                                {{ form_obj.re_pwd }}
                                <span class="help-block">{{ form_obj.re_pwd.errors.0 }}</span>
                            </div>
                        </div>

                        <div class="form-group {% if form_obj.mobile.errors.0 %}has-error{% endif %}">
                            <label for="inputEmail3" class="col-sm-2 control-label">手机号</label>
{#                            {{ form_obj.mobile.label }}#}
                            <div class="col-sm-4">
{#                                <input  class="form-control" id="inputEmail4" placeholder="Password" name="password">#}
                                {{ form_obj.mobile }}
                                <span class="help-block">{{ form_obj.mobile.errors.0 }}</span>
                            </div>
                        </div>

                        <div class="form-group">
{#                            <label for="inputEmail3" class="col-sm-2 control-label">Email</label>#}
                            <div class="col-sm-4 col-sm-offset-2">
                                <input type="submit" class="form-control btn-success" id="inputEmail5" name="提交">
                            </div>
                        </div>


                    </form>

                </div>

            </div>
        </div>

    </div>


</div>
</div>
<script src="/static/jquery-3.3.1.js"></script>
<script>
    var spanEle = $("[name='user_name']").next()
    $("[name='user_name']").on('input',function () {

        {#alert(spanEle)#}
        var name = $(this).val();
        {#alert(name)#}
        $.ajax({
            url:'/check_user/',
            type:'post',
            data:{'name':name},
            success:function (arg) {
                $(spanEle).text(arg).css('color','red')

            }
        })

    })
    // 给input添加移出时间
    $("[name='user_name']").on('blur',function () {
        $(spanEle).text('')

    })

</script>
</body>
</html>